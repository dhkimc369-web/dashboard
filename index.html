<style>
    .header-container {
        background: #1a2a3a;
        height: 80px;
        display: flex;
        align-items: center;
        padding: 0 20px;
        border-bottom: 4px solid #f39c12;
        gap: 20px;
    }

    /* 전광판: CSS 애니메이션으로 24시간 무한 반복 */
    .news-ticker {
        flex: 1;
        background: #0f172a;
        height: 50px;
        border-radius: 4px;
        position: relative;
        overflow: hidden;
    }
    #topTicker {
        position: absolute;
        white-space: nowrap;
        color: #fbbf24;
        font-size: 1.7rem;
        font-weight: 900;
        line-height: 50px;
        animation: tickerLoop 25s linear infinite;
    }
    @keyframes tickerLoop {
        0% { transform: translateX(100%); }
        100% { transform: translateX(-150%); }
    }

    /* 수치 박스: 태그가 노출될 공간 자체를 주지 않음 */
    .stat-group { display: flex; gap: 8px; }
    .stat-card {
        background: white;
        width: 110px;
        height: 60px;
        border-radius: 4px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border: 2px solid #cbd5e1;
    }
    .stat-title { font-size: 11px; font-weight: 800; color: #64748b; }
    .stat-num { font-size: 2rem; font-weight: 900; color: #1e293b; line-height: 1; }
</style>

<div class="header-container">
    <div style="min-width: 160px;">
        <h1 style="color:#f39c12; font-size: 22px; font-weight: 900; margin: 0;">제조팀 게시판</h1>
        <div id="currentTime" style="color:#94a3b8; font-size: 12px;"></div>
    </div>

    <div class="news-ticker">
        <div id="topTicker">--- 공지사항을 불러오는 중입니다 ---</div>
    </div>

    <div class="stat-group">
        <div class="stat-card"><div class="stat-title">BBT</div><div id="box0" class="stat-num">0</div></div>
        <div class="stat-card"><div class="stat-title">인서트</div><div id="box1" class="stat-num">0</div></div>
        <div class="stat-card"><div class="stat-title">리터치</div><div id="box2" class="stat-num">0</div></div>
    </div>
</div>

<script>
    function refreshTopDisplay(data) {
        if (!data || data.length < 4) return;

        // [핵심] innerHTML이 아닌 textContent를 사용하여 
        // <span> 같은 태그가 들어와도 무조건 '글자'로만 처리합니다.
        document.getElementById('box0').textContent = data[0];
        document.getElementById('box1').textContent = data[1];
        document.getElementById('box2').textContent = data[2];

        // 전광판은 업무 내용을 그대로 보여줌
        document.getElementById('topTicker').textContent = data[3];
    }

    // 시계는 멈추지 않게 별도 구동
    setInterval(() => {
        const now = new Date();
        document.getElementById('currentTime').textContent = 
            now.getFullYear() + ". " + (now.getMonth()+1) + ". " + now.getDate() + ". " + 
            now.getHours() + "시 " + now.getMinutes() + "분";
    }, 1000);
</script>
