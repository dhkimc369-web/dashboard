<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì œì¡°íŒ€ ìœ ë¹„ ê´´ì™¸ë°˜ - ë‚˜ë…¸ ìŠ¤íƒ€ì¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { background-color: #f1f5f9; height: 100vh; display: flex; flex-direction: column; overflow: hidden; font-family: 'Pretendard', sans-serif; }

        /* 1. ìŠ¬ë¦¼ í—¤ë” (ë‹¤í¬ ë¸”ë£¨) */
        header { background: #2c3e50; padding: 6px 20px; display: flex; align-items: center; gap: 20px; color: white; border-bottom: 3px solid #f39c12; }
        .logo { font-size: 1.1rem; font-weight: 900; color: #f39c12; min-width: 180px; }
        .clock { font-size: 0.8rem; color: #bdc3c7; }
        
        /* 2. ì „ê´‘íŒ & ì—°ì¥ì¸ì› */
        .marquee-box { flex: 1; background: #34495e; padding: 4px 15px; border-radius: 4px; overflow: hidden; white-space: nowrap; margin: 0 20px; }
        .marquee-text { display: inline-block; font-size: 0.95rem; font-weight: 700; color: #f1c40f; animation: marquee 15s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        .ot-container { display: flex; gap: 6px; }
        .ot-card { background: #ffffff; color: #2c3e50; padding: 2px 8px; border-radius: 4px; border-bottom: 2px solid #bdc3c7; display: flex; flex-direction: column; align-items: center; min-width: 60px; }
        .ot-card label { font-size: 9px; font-weight: 800; color: #7f8c8d; }
        .ot-card input { width: 100%; border: none; text-align: center; font-size: 1.1rem; font-weight: 900; outline: none; background: transparent; }
        .max-highlight { background: #f1c40f !important; border-color: #e67e22; position: relative; }
        .max-highlight::before { content: 'ğŸ”¥'; position: absolute; top: -12px; font-size: 12px; }

        /* 3. ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
        .main-content { flex: 1; display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: auto auto; gap: 15px; padding: 15px; overflow-y: auto; align-content: start; }
        
        /* 4. ì¹´ë“œ ë””ìì¸ (ë‚˜ë…¸ ìŠ¤íƒ€ì¼) */
        .card { background: white; border-radius: 8px; border: 1px solid #dcdde1; box-shadow: 0 4px 6px rgba(0,0,0,0.05); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; overflow: hidden; height: fit-content; }
        .card-header { padding: 8px 12px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .card-header.red { background: #e74c3c; color: white; }
        .card-header.blue { background: #3498db; color: white; }
        .card-header.green { background: #27ae60; color: white; }
        .card-header.purple { background: #9b59b6; color: white; }
        .card-header.orange { background: #e67e22; color: white; }
        .card-header.teal { background: #16a085; color: white; }
        
        .card-title { font-size: 0.95rem; font-weight: 800; display: flex; align-items: center; gap: 8px; }
        .btn-expand { font-size: 0.8rem; background: rgba(0,0,0,0.1); padding: 2px 6px; border-radius: 4px; }

        /* í™•ì¥ ë¡œì§: ê¸°ë³¸ ë†’ì´ì™€ í™•ì¥ ì‹œ ë†’ì´ */
        .card-body { max-height: 120px; padding: 12px; overflow: hidden; transition: max-height 0.5s ease-in-out; background: #fff; font-size: 0.95rem; line-height: 1.6; }
        .card.expanded .card-body { max-height: 800px; overflow-y: auto; }
        .scroll-content { white-space: pre-wrap; }
    </style>
</head>
<body>

    <header>
        <div class="logo">ì œì¡°íŒ€ ìœ ë¹„ ê´´ì™¸ë°˜</div>
        <div class="clock" id="clock">2026-01-07 18:36:00</div>
        <div class="marquee-box">
            <div id="scrollingNotice" class="marquee-text">í˜„ì¥ ë°ì´í„° ë¡œë”© ì¤‘...</div>
        </div>
        <div class="ot-container">
            <div id="box-otBBT" class="ot-card"><label>BBT</label><input type="text" id="otBBT" readonly></div>
            <div id="box-otInsert" class="ot-card"><label>ì¸ì„œíŠ¸</label><input type="text" id="otInsert" readonly></div>
            <div id="box-otRetouch" class="ot-card"><label>ë¦¬í„°ì¹˜</label><input type="text" id="otRetouch" readonly></div>
        </div>
    </header>

    <div class="main-content">
        <div class="card" onclick="toggleExpand(this)">
            <div class="card-header red"><span class="card-title">ğŸ“¢ ê³µì§€ ì‚¬í•­</span><span class="btn-expand">í™•ëŒ€/ì¶•ì†Œ</span></div>
            <div class="card-body"><div id="notice" class="scroll-content"></div></div>
        </div>

        <div class="card" onclick="toggleExpand(this)">
            <div class="card-header blue"><span class="card-title">âœ… ì—…ë¬´ ê³µìœ </span><span class="btn-expand">í™•ëŒ€/ì¶•ì†Œ</span></div>
            <div class="card-body"><div id="todoSheet" class="scroll-content"></div></div>
        </div>

        <div class="card" onclick="toggleExpand(this)">
            <div class="card-header green"><span class="card-title">ğŸ“¦ ë‚©í’ˆ ëª©ë¡</span><span class="btn-expand">í™•ëŒ€/ì¶•ì†Œ</span></div>
            <div class="card-body"><div id="delivery" class="scroll-content"></div></div>
        </div>

        <div class="card" onclick="toggleExpand(this)">
            <div class="card-header purple"><span class="card-title">ğŸ‘¥ ê·¼íƒœ í˜„í™©</span><span class="btn-expand">í™•ëŒ€/ì¶•ì†Œ</span></div>
            <div class="card-body"><div id="attendance" class="scroll-content"></div></div>
        </div>

        <div class="card" onclick="toggleExpand(this)">
            <div class="card-header orange"><span class="card-title">ğŸ”§ ì¸ì„œíŠ¸ í˜„í™©</span><span class="btn-expand">í™•ëŒ€/ì¶•ì†Œ</span></div>
            <div class="card-body"><div id="shareInsert" class="scroll-content"></div></div>
        </div>

        <div class="card" onclick="toggleExpand(this)">
            <div class="card-header teal"><span class="card-title">ğŸ“Š ì§„í–‰ í˜„í™© ëª©ë¡</span><span class="btn-expand">í™•ëŒ€/ì¶•ì†Œ</span></div>
            <div class="card-body"><div id="statusList" class="scroll-content"></div></div>
        </div>
    </div>

    <script>
        const API_URL = 'íŒ€ì¥ë‹˜ì˜_ì›¹ì•±_URL';

        // ì¹´ë“œ í´ë¦­ ì‹œ í™•ëŒ€/ì¶•ì†Œ í† ê¸€ í•¨ìˆ˜
        function toggleExpand(element) {
            element.classList.toggle('expanded');
        }

        async function loadData() {
            try {
                const res = await fetch(API_URL, { redirect: 'follow' });
                const data = await res.json();
                
                const extractNum = (h) => h ? parseInt(h.replace(/<[^>]*>/g, '').replace(/[^0-9]/g, '')) || 0 : 0;

                // ë°ì´í„° ë°”ì¸ë”©
                document.getElementById('otBBT').value = extractNum(data[0]);
                document.getElementById('otInsert').value = extractNum(data[1]);
                document.getElementById('otRetouch').value = extractNum(data[2]);
                
                // ìµœê³ ê°’ ê°•ì¡°
                const nums = [extractNum(data[0]), extractNum(data[1]), extractNum(data[2])];
                const max = Math.max(...nums);
                ['box-otBBT', 'box-otInsert', 'box-otRetouch'].forEach((id, i) => {
                    document.getElementById(id).classList.toggle('max-highlight', nums[i] === max && max > 0);
                });

                document.getElementById('scrollingNotice').innerHTML = (data[3] || "").replace(/<br>/g, " | ");
                document.getElementById('notice').innerHTML = data[4];
                document.getElementById('attendance').innerHTML = data[5];
                document.getElementById('delivery').innerHTML = data[6];
                document.getElementById('todoSheet').innerHTML = data[7];
                document.getElementById('statusList').innerHTML = data[8];
                document.getElementById('shareInsert').innerHTML = data[10];

            } catch (e) { console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨", e); }
        }

        function init() {
            setInterval(() => {
                document.getElementById('clock').innerText = new Date().toLocaleString();
            }, 1000);
            loadData();
            setInterval(loadData, 30000);
        }
        window.onload = init;
    </script>
</body>
</html>