<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì œì¡°íŒ€ í†µí•© ëŒ€ì‹œë³´ë“œ (í™•ì¥í˜•)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { background-color: #f1f5f9; height: 100vh; display: flex; flex-direction: column; overflow: hidden; font-family: 'Pretendard', sans-serif; }
        
        /* 1. ìƒë‹¨ í—¤ë” ì••ì¶• (ê¸°ì¡´ ëŒ€ë¹„ 50%) */
        header { background: #1e293b; padding: 8px 20px; display: flex; align-items: center; gap: 20px; border-bottom: 2px solid #fbbf24; }
        .logo-area { min-width: 200px; }
        .logo-area h1 { font-size: 1.2rem; font-weight: 900; color: #fbbf24; line-height: 1.1; }
        #clockDisplay { font-size: 0.85rem; color: #94a3b8; font-weight: 600; }
        
        /* 2. ì „ê´‘íŒ & ì—°ì¥ì¸ì› ì»´íŒ©íŠ¸ ë°°ì¹˜ */
        .marquee-container { flex: 1; background: rgba(0,0,0,0.3); border-radius: 4px; padding: 4px 15px; overflow: hidden; white-space: nowrap; }
        .marquee-text { display: inline-block; font-size: 1rem; font-weight: 700; color: #fbbf24; animation: marquee 15s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        .ot-group { display: flex; gap: 8px; align-items: center; }
        .ot-item { background: #334155; padding: 2px 8px; border-radius: 4px; display: flex; flex-direction: column; align-items: center; border: 1px solid #475569; position: relative; }
        .ot-item label { font-size: 10px; color: #94a3b8; font-weight: 800; margin-bottom: -2px; }
        .ot-item input { background: transparent; color: white; border: none; width: 35px; text-align: center; font-size: 1.2rem; font-weight: 900; outline: none; }
        .max-highlight { background: #7c3aed !important; border-color: #fbbf24; transform: scale(1.05); }
        .max-highlight::after { content: 'ğŸ‰'; position: absolute; top: -12px; font-size: 14px; animation: bounce 0.5s infinite alternate; }
        @keyframes bounce { 0% { transform: translateY(0); } 100% { transform: translateY(-5px); } }

        /* 3. í•˜ë‹¨ ë©”ëª¨ ë°•ìŠ¤ ì˜ì—­ (ë³´ìƒëœ í¬ê¸°) */
        .main-grid { flex: 1; display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(2, 1fr); gap: 12px; padding: 12px; }
        .card { background: white; border-radius: 10px; display: flex; flex-direction: column; border: 1px solid #e2e8f0; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); overflow: hidden; position: relative; }
        .card-header { padding: 8px 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f1f5f9; }
        .card-title { font-size: 1rem; font-weight: 800; display: flex; align-items: center; gap: 6px; }
        
        /* 4. í™•ì¥ ë²„íŠ¼ ë””ìì¸ */
        .expand-btn { cursor: pointer; padding: 4px; border-radius: 4px; transition: background 0.2s; color: #94a3b8; }
        .expand-btn:hover { background: #f1f5f9; color: #1e293b; }

        .card-body { flex: 1; padding: 12px; font-size: 1rem; line-height: 1.5; overflow: hidden; background: #fafafa; position: relative; }
        .scroll-content { white-space: pre-wrap; word-break: break-all; }
        
        /* 5. ëª¨ë‹¬(ì „ì²´ë³´ê¸°) ìŠ¤íƒ€ì¼ */
        #modalOverlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center; padding: 40px; }
        #modalContent { background: white; width: 100%; max-width: 800px; border-radius: 15px; display: flex; flex-direction: column; max-height: 90vh; }
        #modalHeader { padding: 20px; border-bottom: 2px solid #f1f5f9; display: flex; justify-content: space-between; align-items: center; }
        #modalBody { padding: 30px; overflow-y: auto; font-size: 1.5rem; line-height: 1.8; }
    </style>
</head>
<body>

    <header>
        <div class="logo-area">
            <h1>ì œì¡°íŒ€ í†µí•© ë³´ë“œ</h1>
            <div id="clockDisplay">0000-00-00 00:00:00</div>
        </div>
        <div class="marquee-container">
            <div id="scrollingNotice" class="marquee-text">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
        </div>
        <div class="ot-group">
            <div id="box-otBBT" class="ot-item"><label>BBT</label><input type="text" id="otBBT" readonly></div>
            <div id="box-otInsert" class="ot-item"><label>ì¸ì„œíŠ¸</label><input type="text" id="otInsert" readonly></div>
            <div id="box-otRetouch" class="ot-item"><label>ë¦¬í„°ì¹˜</label><input type="text" id="otRetouch" readonly></div>
        </div>
    </header>

    <div class="main-grid">
        <div class="card border-t-4 border-red-500">
            <div class="card-header">
                <span class="card-title text-red-600">ğŸ“¢ ê³µì§€ ì‚¬í•­</span>
                <span class="expand-btn" onclick="openModal('ğŸ“¢ ê³µì§€ ì‚¬í•­', 'notice')">ğŸ”</span>
            </div>
            <div class="card-body"><div id="notice" class="scroll-content"></div></div>
        </div>
        <div class="card border-t-4 border-blue-500 row-span-2">
            <div class="card-header">
                <span class="card-title text-blue-600">âœ… ì—…ë¬´ ê³µìœ </span>
                <span class="expand-btn" onclick="openModal('âœ… ì—…ë¬´ ê³µìœ ', 'todoSheet')">ğŸ”</span>
            </div>
            <div class="card-body"><div id="todoSheet" class="scroll-content"></div></div>
        </div>
        <div class="card border-t-4 border-green-500">
            <div class="card-header">
                <span class="card-title text-green-600">ğŸ“¦ ë‚©í’ˆ ëª©ë¡</span>
                <span class="expand-btn" onclick="openModal('ğŸ“¦ ë‚©í’ˆ ëª©ë¡', 'delivery')">ğŸ”</span>
            </div>
            <div class="card-body"><div id="delivery" class="scroll-content"></div></div>
        </div>
        <div class="card border-t-4 border-slate-500">
            <div class="card-header">
                <span class="card-title text-slate-600">ğŸ‘¥ ê·¼íƒœ í˜„í™©</span>
                <span class="expand-btn" onclick="openModal('ğŸ‘¥ ê·¼íƒœ í˜„í™©', 'attendance')">ğŸ”</span>
            </div>
            <div class="card-body"><div id="attendance" class="scroll-content"></div></div>
        </div>
        <div class="card border-t-4 border-teal-500">
            <div class="card-header">
                <span class="card-title text-teal-600">ğŸ“Š ì§„í–‰ í˜„í™©</span>
                <span class="expand-btn" onclick="openModal('ğŸ“Š ì§„í–‰ í˜„í™©', 'statusList')">ğŸ”</span>
            </div>
            <div class="card-body"><div id="statusList" class="scroll-content"></div></div>
        </div>
    </div>

    <div id="modalOverlay" onclick="closeModal()">
        <div id="modalContent" onclick="event.stopPropagation()">
            <div id="modalHeader">
                <h2 id="modalTitle" class="text-2xl font-black">ì œëª©</h2>
                <button onclick="closeModal()" class="text-3xl font-bold text-slate-400 hover:text-red-500">&times;</button>
            </div>
            <div id="modalBody" id="modalText">ë‚´ìš©ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.</div>
        </div>
    </div>

    <script>
        const API_URL = 'íŒ€ì¥ë‹˜ì˜_ì›¹ì•±_URL';

        function openModal(title, contentId) {
            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalBody').innerHTML = document.getElementById(contentId).innerHTML;
            document.getElementById('modalOverlay').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modalOverlay').style.display = 'none';
        }

        async function loadData() {
            try {
                const res = await fetch(API_URL, { redirect: 'follow' });
                const data = await res.json();
                
                const extractNumber = (h) => h ? parseInt(h.replace(/<[^>]*>/g, '').replace(/[^0-9]/g, '')) || 0 : 0;

                // ë°ì´í„° ë°”ì¸ë”©
                document.getElementById('otBBT').value = extractNumber(data[0]);
                document.getElementById('otInsert').value = extractNumber(data[1]);
                document.getElementById('otRetouch').value = extractNumber(data[2]);
                
                // ê°•ì¡° ë¡œì§
                const nums = [extractNumber(data[0]), extractNumber(data[1]), extractNumber(data[2])];
                const max = Math.max(...nums);
                ['box-otBBT', 'box-otInsert', 'box-otRetouch'].forEach((id, i) => {
                    document.getElementById(id).classList.toggle('max-highlight', nums[i] === max && max > 0);
                });

                document.getElementById('scrollingNotice').innerHTML = (data[3] || "").replace(/<br>/g, " | ");
                document.getElementById('notice').innerHTML = data[4];
                document.getElementById('attendance').innerHTML = data[5];
                document.getElementById('delivery').innerHTML = data[6];
                document.getElementById('todoSheet').innerHTML = data[7];
                document.getElementById('statusList').innerHTML = data[8];

            } catch (e) { console.error("ë¡œë“œ ì‹¤íŒ¨", e); }
        }

        function init() {
            setInterval(() => {
                const now = new Date();
                document.getElementById('clockDisplay').innerText = now.toLocaleString();
            }, 1000);
            loadData();
            setInterval(loadData, 30000);
        }
        window.onload = init;
    </script>
</body>
</html>